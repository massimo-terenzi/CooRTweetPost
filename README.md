# CooRTweetPost

[![DOI](https://zenodo.org/badge/DOI/10.5281/zenodo.17592819.svg)](https://doi.org/10.5281/zenodo.17592819)

**CooRTweetPost** is an R package designed to post-process coordination networks generated by [CooRTweet](https://github.com/nicolarighetti/CooRTweet).  
It creates structured summary tables of coordinated behavior:

- **by account** (with content tracking)
- **by community** (with content tracking)
- **by shared object** (e.g., text, link, image, hashtag) with full content traceability

## ‚ú® New in v0.3.0

**Content ID tracking**: All summary tables now include `content_id` information, enabling full traceability from coordinated behavior to original posts. This allows you to:
- Track which specific posts (URLs) were shared in coordinated patterns
- Analyze content propagation across accounts and communities
- Link shared objects back to their source content

---

## üîß Installation

To install the latest version from GitHub:

```r
install.packages("devtools") # if not already installed
devtools::install_github("massimo-terenzi/CooRTweetPost")
```

---

## üöÄ How to use

You need to have already used **CooRTweet** to:

1. Prepare your dataset  
2. Detect coordinated groups  
3. Generate the coordination network graph  

### ‚ñ∂Ô∏è Quick Start Example

```r
library(CooRTweet)
library(CooRTweetPost)

# Step 1: Detect coordinated groups
coordinated_groups <- detect_groups(
  x = my_data, 
  min_participation = 2,
  time_window = 60
)

# Step 2: Generate coordination network
g <- generate_coordinated_network(
  coordinated_groups, 
  edge_weight = 0.8,
  subgraph = 1,
  objects = TRUE
)

# Step 3: Export all results automatically
export_all_results(
  coordinated_groups = coordinated_groups,
  network_graph = g,
  output_dir = "my_output"
)
```

### üîç Advanced Usage: Individual Summary Functions

If you need more control, you can call the summary functions individually:

```r
library(CooRTweetPost)
library(CooRTweet)
library(igraph)

# After detecting groups and generating the network...

# Add community detection (if not already done)
if (is.null(V(g)$name)) {
  V(g)$name <- as.character(seq_len(vcount(g)))
}

if (vcount(g) > 1 && ecount(g) > 0) {
  com <- cluster_louvain(g)
  V(g)$community <- membership(com)
}

# Generate individual summary tables
accounts_summary <- create_vertex_summary_table(coordinated_groups, g)
communities_summary <- create_community_summary_table(coordinated_groups, g)
objects_output <- create_object_summary_table(coordinated_groups, g)

# Extract object summaries
objects_summary <- objects_output$object_summary
objects_by_community <- objects_output$object_community_long

# Now you can work with the dataframes directly
head(accounts_summary)
#   vertex  avg_time_delta  unique_objects  unique_contents  content_ids  ...
```

### üìä What You Get in Each Summary

**Accounts Summary** (`coordinated_accounts.csv`):
- `vertex`: Account identifier
- `avg_time_delta`: Average time difference in coordinated shares
- `unique_objects`: Number of unique objects shared
- `unique_contents`: Number of unique content IDs ‚ú® NEW
- `content_ids`: Comma-separated list of content IDs ‚ú® NEW
- `connected_vertices`: Number of connected accounts
- `community`: Community membership

**Communities Summary** (`coordinated_communities.csv`):
- `community`: Community ID
- `avg_time_delta`: Average coordination timing
- `unique_objects`: Objects shared in the community
- `unique_contents`: Unique content items ‚ú® NEW
- `content_ids`: Content list ‚ú® NEW
- `unique_vertices`: Number of accounts

**Objects Summary** (`coordinated_objects.csv`):
- `object_id`: The shared object (text, URL, etc.)
- `unique_vertices`: How many accounts shared it
- `unique_communities`: Across how many communities
- `unique_contents`: Linked content items ‚ú® NEW
- `content_ids`: Source content URLs ‚ú® NEW

---

## üìÅ Output files generated

The function `export_all_results()` will create a folder (default: `output`) containing:

| Filename                                 | Description                                | New in v0.3.0 |
|------------------------------------------|--------------------------------------------|---------------|
| `coordinated_accounts.csv`               | Summary of coordinated accounts            | ‚úÖ `unique_contents`, `content_ids` |
| `coordinated_communities.csv`           | Summary of communities                     | ‚úÖ `unique_contents`, `content_ids` |
| `coordinated_objects.csv`               | Summary of shared objects (e.g., links)    | ‚úÖ `unique_contents`, `content_ids` |
| `coordinated_objects_by_community.csv`  | Object ‚Üî community mapping                 | ‚úÖ `content_id` column |

---

## üì¶ Dependencies

This package requires:

- `igraph`
- `dplyr`
- `tidyr`
- `data.table`
- `magrittr`

You can install them via:

```r
install.packages(c("igraph", "dplyr", "tidyr", "data.table", "magrittr"))
```

---

## üí° Use Cases

### Track Content Propagation
```r
# Find which specific posts were coordinated
accounts_summary %>%
  filter(unique_contents > 5) %>%
  select(vertex, content_ids)
```

### Analyze Cross-Community Sharing
```r
# Which objects were shared across multiple communities?
objects_summary %>%
  filter(unique_communities > 1) %>%
  arrange(desc(unique_communities))
```

### Link Back to Original Posts
```r
# Get all content URLs shared by a specific community
objects_by_community %>%
  filter(community == 1) %>%
  pull(content_id)
```

---

## üì¨ Questions?

Open an issue [here](https://github.com/massimo-terenzi/CooRTweetPost/issues) or contact the maintainer.

## üìÑ Citation

If you use this package in your research, please cite:
```bibtex
@software{terenzi_2025_coortweetpost,
  author       = {Terenzi, Massimo},
  title        = {CooRTweetPost},
  year         = 2025,
  version      = {v0.3.0},
  publisher    = {Zenodo},
  doi          = {10.5281/zenodo.17592819},
  url          = {https://doi.org/10.5281/zenodo.17592819}
}
```

Or in text format:

> Terenzi, M. (2025). CooRTweetPost (v0.3.0). Zenodo. https://doi.org/10.5281/zenodo.17592819
